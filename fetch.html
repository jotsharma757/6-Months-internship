<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fetch - data</title>
</head>

<body>
    <h3>Fetch the data</h3>
    <button id="btn">Fetch</button>
    <button id="deleteBtn">Delete</button>
    <button id="post">Post</button>
    <button id="update">UPDATE</button>
    <ul id="lists"></ul>
    <script>
        const btn = document.querySelector("#btn");
        const lists = document.querySelector("#lists");
        const deleteBtn = document.querySelector("#deleteBtn");
        const post = document.querySelector("#post");
        const update = document.querySelector("#update");

        //Load the data
        btn.addEventListener("click", () => {
            fetch("https://jsonplaceholder.typicode.com/users")

                .then(res => res.json())
                .then(data => {
                    lists.innerHTML = "";
                    data.slice(0, 10).forEach(post => {
                        const li = document.createElement("li");
                        li.innerText = post.name;
                        lists.appendChild(li);
                    });
                });
        });
        //Delete ythe data
        deleteBtn.addEventListener("click", () => {
            fetch("https://jsonplaceholder.typicode.com/users/1", {
                method: "DELETE"
            })
                .then(() => {
                    if (lists.firstChild) {
                        lists.removeChild(lists.firstChild);
                    }
                });
        });
        //post the data
        post.addEventListener("click", () => {
            fetch("https://jsonplaceholder.typicode.com/users", {
                method: "POST",
                headers: {
                    "content-type": "application/JSON"
                },
                body: JSON.stringify({
                    Title: "New User",
                    body: "data.name"
                })
            })
                .then(res => res.json())
                .then(data => {
                    console.log(data);
                    
                    const li = document.createElement("li");
                    li.innerText = data.Title;
                    console.log(li);
                    
                    lists.appendChild(li);
                });
        });
        //update the data
        update.addEventListener("click", () => {
            fetch("https://jsonplaceholder.typicode.com/users/1", {
                method: "PATCH",
                headers: {
                    "Content-Type": "application/json"
                },

                body: JSON.stringify({
                    Title: "Update User",
                    
                })
            })
                .then(res => res.json())
                .then(data => {
                    const li = document.createElement("li");
                    li.innerText = data.Title;
                    lists.appendChild(li);
                });
        });

    </script>
</body>

</html>