<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Pagination Table (Page-level Search & Sort)</title>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
</head>

<body class="p-6">

    <h1 class="font-bold text-2xl mb-4">Table Using Pagination</h1>

    <!-- Search -->
    <input
        type="text"
        id="search"
        placeholder="Search in current page..."
        class="border px-3 py-2 mb-4 w-64"
    />

    <!-- Table -->
    <table class="border border-gray-400 w-full max-w-xl">
        <thead class="bg-gray-200">
            <tr>
                <th class="border px-4 py-2">ID</th>
                <th
                    id="sortName"
                    class="border px-4 py-2 cursor-pointer select-none"> Name ‚¨ç
                </th>
            </tr>
        </thead>
        <tbody id="tableBody"></tbody>
    </table>

    <!-- Pagination -->
    <div class="mt-4 flex items-center gap-4">
        <button id="prev" class="border px-3 py-1">Prev</button>
        <span id="pageInfo"></span>
        <button id="next" class="border px-3 py-1">Next</button>
    </div>

    <script>
        const search = document.getElementById("search");
        const tableBody = document.getElementById("tableBody");
        const pageInfo = document.getElementById("pageInfo");
        const prevBtn = document.getElementById("prev");
        const nextBtn = document.getElementById("next");
        const sortName = document.getElementById("sortName");

        let allData = [];
        let currentPage = 1;
        let itemsPerPage = 3;
        let nameAsc = true;
        let pageData = [];//

        // Fetch data
        fetch("https://jsonplaceholder.typicode.com/users")
            .then(res => res.json())
            .then(data => {
                allData = data.map(user => ({
                    id: user.id,
                    name: user.name
                }));
                renderTable();
            });

        function renderTable() {
            tableBody.innerHTML = "";
            search.value = "";

            const start = (currentPage - 1) * itemsPerPage;
            const end = start + itemsPerPage;

            // ONLY current page data
            pageData = allData.slice(start, end);

            pageData.forEach(item => {
                const tr = document.createElement("tr");
                tr.innerHTML = `
                    <td class="border px-4 py-2">${item.id}</td>
                    <td class="border px-4 py-2">${item.name}</td>
                `;
                tableBody.appendChild(tr);
            });

            const totalPages = Math.ceil(allData.length / itemsPerPage);
            pageInfo.textContent = `Page ${currentPage} of ${totalPages}`;
            prevBtn.disabled = currentPage === 1;
            nextBtn.disabled = currentPage === totalPages;
        }

        // Pagination
        nextBtn.addEventListener("click", () => {
            const totalPages = Math.ceil(allData.length / itemsPerPage);
            if (currentPage < totalPages) {
                currentPage++;
                renderTable();
            }
        });

        prevBtn.addEventListener("click", () => {
            if (currentPage > 1) {
                currentPage--;
                renderTable();
            }
        });

        // Search (ONLY CURRENT PAGE)
        search.addEventListener("input", () => {
            const value = search.value.toLowerCase();
            tableBody.innerHTML = "";

            pageData
                .filter(item => item.name.toLowerCase().includes(value))
                .forEach(item => {
                    const tr = document.createElement("tr");
                    tr.innerHTML = `
                        <td class="border px-4 py-2">${item.id}</td>
                        <td class="border px-4 py-2">${item.name}</td>
                    `;
                    tableBody.appendChild(tr);
                });
        });

        // Sort (ONLY CURRENT PAGE)
        sortName.addEventListener("click", () => {
            nameAsc = !nameAsc;

            const sorted = [...pageData].sort((a, b) =>
                nameAsc
                    ? a.name.localeCompare(b.name)
                    : b.name.localeCompare(a.name)
            );

            tableBody.innerHTML = "";
            sorted.forEach(item => {
                const tr = document.createElement("tr");
                tr.innerHTML = `
                    <td class="border px-4 py-2">${item.id}</td>
                    <td class="border px-4 py-2">${item.name}</td>
                `;
                tableBody.appendChild(tr);
            });
        });
    </script>

</body>
</html>
